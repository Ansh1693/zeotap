(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6168:function(e,t,a){Promise.resolve().then(a.bind(a,4697))},4697:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var s=a(7437),r=a(6484),n=a(2265),i=a(9397),l=a(7053),o=a(7712),d=a(4508);let c=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:i=!1,...o}=e,u=i?l.g7:"button";return(0,s.jsx)(u,{className:(0,d.cn)(c({variant:r,size:n,className:a})),ref:t,...o})});u.displayName="Button";var f=a(5153),m=a(5868);let p=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...r})});p.displayName="Card";let x=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...r})});x.displayName="CardHeader";let g=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...r})});g.displayName="CardTitle",n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let h=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("p-6 pt-0",a),...r})});h.displayName="CardContent";let v=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",a),...r})});v.displayName="CardFooter";let j=n.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});j.displayName="Input";let y=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});y.displayName="Textarea";var N=a(4182),b=a(653);let w=N.fC;N.xz;let S=N.h_;N.x8;let E=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.aV,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});E.displayName=N.aV.displayName;let C=n.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(S,{children:[(0,s.jsx)(E,{}),(0,s.jsxs)(N.VY,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(N.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(b.Pxu,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});C.displayName=N.VY.displayName;let _=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};_.displayName="DialogHeader";let O=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};O.displayName="DialogFooter";let T=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.Dx,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});T.displayName=N.Dx.displayName;let R=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(N.dk,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});function k(e){let{isOpen:t,onClose:a,onEvaluate:r,cardName:i}=e,[l,o]=(0,n.useState)(""),{toast:d}=(0,f.pm)();return(0,s.jsx)(w,{open:t,onOpenChange:a,children:(0,s.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(_,{children:[(0,s.jsxs)(T,{children:["Evaluate ",i]}),(0,s.jsx)(R,{children:"Enter JSON data for evaluation"})]}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsx)(y,{placeholder:"Enter JSON data here",value:l,onChange:e=>o(e.target.value)})}),(0,s.jsx)(O,{children:(0,s.jsx)(u,{onClick:()=>{try{let e=JSON.parse(l);r(e),o(""),a()}catch(e){d({title:"Error",description:"Failed to parse JSON data. Please enter valid JSON data.",variant:"destructive"})}},children:"Evaluate"})})]})})}function A(e){var t;let{card:a,onEdit:r,onEvaluate:i}=e,[l,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(a),[f,N]=(0,n.useState)(!1);return(0,s.jsxs)(p,{className:"flex flex-col",children:[(0,s.jsx)(x,{children:(0,s.jsxs)(g,{className:"flex justify-between items-center",children:[l?(0,s.jsx)(j,{value:d.name,onChange:e=>c({...d,name:e.target.value})}):a.name,(0,s.jsx)(u,{variant:"ghost",size:"sm",onClick:()=>o(!l),children:(0,s.jsx)(m.Z,{className:"h-4 w-4"})})]})}),(0,s.jsx)(h,{className:"flex-grow",children:l?(0,s.jsx)(y,{value:null!==(t=d.ruleString)&&void 0!==t?t:"",onChange:e=>c({...d,ruleString:e.target.value})}):(0,s.jsx)("p",{children:a.ruleString})}),(0,s.jsx)(v,{className:"flex justify-between",children:l?(0,s.jsx)(u,{onClick:()=>{r(d),o(!1)},children:"Save"}):(0,s.jsx)(u,{variant:"outline",onClick:()=>N(!0),children:"Evaluate"})}),(0,s.jsx)(k,{isOpen:f,onClose:()=>N(!1),onEvaluate:e=>i({ruleId:a._id,userData:e}),cardName:a.name})]})}function D(e){let{cards:t,onEdit:a,onEvaluate:r}=e;return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>(0,s.jsx)(A,{card:e,onEdit:a,onEvaluate:r},e._id))})}R.displayName=N.dk.displayName;var I=a(6394);let M=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(I.f,{ref:t,className:(0,d.cn)(M(),a),...r})});function P(e){let{isOpen:t,onClose:a,onAdd:r,onCombine:i}=e,[l,o]=(0,n.useState)({name:"",rules:[""]}),d=(e,t)=>{let a=[...l.rules];a[e]=t,o({...l,rules:a})},c=e=>{let t=l.rules.filter((t,a)=>a!==e);o({...l,rules:t})};return(0,s.jsx)(w,{open:t,onOpenChange:a,children:(0,s.jsxs)(C,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(_,{children:[(0,s.jsx)(T,{children:"Add New Card"}),(0,s.jsx)(R,{children:"Enter the name and rules for the new card."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(F,{htmlFor:"name",className:"text-right",children:"Name"}),(0,s.jsx)(j,{id:"name",value:l.name,onChange:e=>o({...l,name:e.target.value}),className:"col-span-3"})]}),l.rules.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsxs)(F,{htmlFor:"rule-".concat(t),className:"text-right",children:["Rule ",t+1]}),(0,s.jsx)(y,{id:"rule-".concat(t),value:e,onChange:e=>d(t,e.target.value),className:"col-span-3"}),l.rules.length>1&&(0,s.jsx)(u,{onClick:()=>{c(t)},children:"Remove"})]},t)),(0,s.jsx)(u,{onClick:()=>{o({...l,rules:[...l.rules,""]})},children:"Add Rule"})]}),(0,s.jsx)(O,{children:(0,s.jsx)(u,{onClick:()=>{l.rules.length>1?i({name:l.name,ruleStrings:l.rules}):r({name:l.name,ruleString:l.rules[0]}),o({name:"",rules:[""]})},children:"Add Card"})})]})})}F.displayName=I.f.displayName;var z=a(3464);let Q="http://localhost:5000/api/ast/rules";async function V(){return(await z.Z.get("".concat(Q))).data.rules}async function Z(e){return(await z.Z.post("".concat(Q,"/create"),e)).data}async function J(e){return(await z.Z.patch("".concat(Q,"/").concat(e._id),e)).data.rule}async function H(e){return(await z.Z.post("".concat(Q,"/combine"),e)).data.rule}async function U(e){let t=await z.Z.post("".concat(Q,"/evaluate"),{ruleId:e.ruleId,userData:e.userData});return console.log(t.data),t.data}let Y=new r.QueryClient;function B(){return(0,s.jsx)(r.QueryClientProvider,{client:Y,children:(0,s.jsx)(G,{})})}function G(){let[e,t]=(0,n.useState)(!1),a=(0,r.useQueryClient)(),{toast:l}=(0,f.pm)(),{data:o,isLoading:d,error:c}=(0,r.useQuery)("cards",V,{onError:e=>{l({title:"Error",description:"Failed to fetch cards. Please try again.",variant:"destructive"})}}),m=(0,r.useMutation)(Z,{onSuccess:()=>{a.invalidateQueries("cards"),t(!1),l({title:"Success",description:"Card added successfully."})},onError:e=>{l({title:"Error",description:e instanceof Error?e.message:"Failed to add card. Please try again.",variant:"destructive"})}}),p=(0,r.useMutation)(H,{onSuccess:()=>{a.invalidateQueries("cards"),t(!1),l({title:"Success",description:"Card combined successfully."})},onError:e=>{l({title:"Error",description:e instanceof Error?e.message:"Failed to combine cards. Please try again.",variant:"destructive"})}}),x=(0,r.useMutation)(J,{onSuccess:e=>{a.invalidateQueries("cards"),l({title:"Success",description:"Card updated successfully."}),null==o||o.map(t=>t._id===e._id?e:t)},onError:e=>{l({title:"Error",description:e instanceof Error?e.message:"Failed to update card. Please try again.",variant:"destructive"})}}),g=(0,r.useMutation)(U,{onSuccess:e=>{l({title:"Success",description:"Card evaluated successfully. Result: ".concat(e.result)})},onError:e=>{l({title:"Error",description:e instanceof Error?e.message:"Failed to evaluate card. Please try again.",variant:"destructive"})}});return d?(0,s.jsx)("div",{children:"Loading..."}):c?(0,s.jsxs)("div",{children:["An error occurred: ",c.message]}):(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Rule Manager"}),(0,s.jsxs)(u,{onClick:()=>t(!0),children:[(0,s.jsx)(i.Z,{className:"mr-2 h-4 w-4"})," Create New Rule"]})]}),(0,s.jsx)(D,{cards:o||[],onEdit:x.mutate,onEvaluate:g.mutate}),(0,s.jsx)(P,{isOpen:e,onClose:()=>t(!1),onAdd:m.mutate,onCombine:p.mutate})]})}function L(){return(0,s.jsx)(B,{})}},5153:function(e,t,a){"use strict";a.d(t,{pm:function(){return f}});var s=a(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},4508:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(1994),r=a(3335);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[310,669,921,971,117,744],function(){return e(e.s=6168)}),_N_E=e.O()}]);